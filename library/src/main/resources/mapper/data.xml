<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="data">
    <!-- 추천도서 페이지 -->
	<select id = "recommendselect" parameterType="hashmap" resultType="hashmap">
		select * from library
		<if test="no != null">
		   where del_yn = 'N' and no = #{no} 
		</if>
		order by rand() limit 5
	</select>
	
	
	<!-- 추천도서 상세페이지 -->
	<select id = "recommendviewselect" parameterType="hashmap" resultType="hashmap">
		select * from library
		<if test="no != null">
		   where del_yn = 'N' and no = #{no} 
		</if>
	</select>
	
	
	<!--  도서 데이터 총 갯수  -->
	<select id = "bookcntselect"  parameterType="hashmap" resultType="int">
		select count(*) from library where del_yn = 'N' 
	</select>
	
	
	<!-- 신간안내 데이터 목록 조회 -->
	<select id = "newbookselect" parameterType="hashmap" resultType="hashmap">
		select * from library
		<if test="no != null ">
		   where del_yn = 'N' and no = #{no}
	    </if> 
	</select>
	
	
	<!-- 도서검색 데이터 목록 조회 -->
	<select id = "searchselect" parameterType="hashmap" resultType="hashmap">
		select * from library
		<if test="no != null ">
		   where del_yn = 'N' and no = #{no}
	    </if> 
	</select>
	
	<!-- 도서 검색 단어 조회  -->
	<select id = "searchhistory"  parameterType="hashmap" resultType="hashmap">
		select count(*) from searchhistory
		<if test="no != null ">
		   where searchtext = #{searchtext}
	    </if> 
	</select>
	
	
	<insert id = "insertsearchword" parameterType="hashmap" >
		insert into (searchtext, searchperson) values (#{searchtext}, #{searchperson})
	</insert>
	
</mapper>